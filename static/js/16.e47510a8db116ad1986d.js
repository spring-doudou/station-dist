webpackJsonp([16],{E4LH:function(e,t,r){"use strict";function a(e){return/^[0-9]*$/.test(e)}function s(e){return null===e||void 0===e||0===e.length}t.a=a,t.b=s},FgR9:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-col",{staticClass:"toolbar",staticStyle:{"margin-top":"10px"},attrs:{span:24}},[r("el-form",{ref:"queryForm",staticClass:"shop-form-inline",attrs:{inline:!0,model:e.queryForm,rules:e.queryFormRules}},[r("el-row",{staticStyle:{"margin-left":"15px"}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{prop:"orderId",label:"订单号"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入订单ID搜索"},model:{value:e.queryForm.orderId,callback:function(t){e.$set(e.queryForm,"orderId",t)},expression:"queryForm.orderId"}},[r("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{prop:"orderId",label:"运单号"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入运单ID搜索"},model:{value:e.queryForm.deliveryOrderId,callback:function(t){e.$set(e.queryForm,"deliveryOrderId",t)},expression:"queryForm.deliveryOrderId"}},[r("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"运单状态"}},[r("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},e._l(e.deliveryOrderStatusList,function(e){return r("el-option",{key:e.status,attrs:{label:e.desc,value:e.status}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"订单类型"}},[r("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.queryForm.type,callback:function(t){e.$set(e.queryForm,"type",t)},expression:"queryForm.type"}},e._l(e.orderTypeList,function(e){return r("el-option",{key:e.type,attrs:{label:e.desc,value:e.type}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"订单生成时间"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.queryForm.dateRange,callback:function(t){e.$set(e.queryForm,"dateRange",t)},expression:"queryForm.dateRange"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.queryDeliveryOrders}},[e._v("搜索")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.deliveryOrdersTable}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left","label-width":"100px",inline:""}},[r("el-row",[e._v("\n            用户信息\n          ")]),e._v(" "),r("el-form-item",{attrs:{label:"用户地址:"}},[r("span",[e._v(e._s(t.row.userAddress))])]),e._v(" "),r("el-form-item",{attrs:{label:"商户地址:"}},[r("span",[e._v(e._s(t.row.shopAddress))])]),e._v(" "),r("el-form-item",{attrs:{label:"支付方式:"}},[r("span",[e._v(e._s(e._f("formatPaymentType")(t.row.paymentType)))])]),e._v(" "),r("el-form-item",{attrs:{label:"包装袋费用:"}},[r("span",[e._v(e._s(t.row.bagAmount)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"总重量:"}},[r("span",[e._v(e._s(t.row.totalWeight)+"克")])]),e._v(" "),r("el-form-item",{attrs:{label:"商品总价:"}},[r("span",[e._v(e._s(t.row.totalAmount)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"配送价:"}},[r("span",[e._v(e._s(t.row.deliveryAmount)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"用户支付:"}},[r("span",[e._v(e._s(t.row.userPaymentAmount)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"商户补贴:"}},[r("span",[e._v(e._s(t.row.shopAllowance)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"平台补贴:"}},[r("span",[e._v(e._s(t.row.platformAllowance)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"平台佣金:"}},[r("span",[e._v(e._s(t.row.platformCommission)+"元")])]),e._v(" "),r("el-form-item",{attrs:{label:"商户经纬度:"}},[r("span",[e._v(e._s(t.row.shopLongitude)+","+e._s(t.row.shopLatitude))])]),e._v(" "),r("el-form-item",{attrs:{label:"用户经纬度:"}},[r("span",[e._v(e._s(t.row.userLongitude)+","+e._s(t.row.userLatitude))])]),e._v(" "),r("el-form-item",{attrs:{label:"用户姓名:"}},[r("span",[e._v(e._s(t.row.userName))])]),e._v(" "),r("el-form-item",{attrs:{label:"用户备注:"}},[r("span",[e._v(e._s(t.row.userRemark))])]),e._v(" "),r("el-form-item",{attrs:{label:"异常原因:"}},[r("span",[e._v(e._s(e._f("formatExceptionCode")(t.row.exceptionCode)))])]),e._v(" "),r("el-form-item",{attrs:{label:"异常原因:"}},[r("span",[e._v(e._s(e._f("formatExceptionCode")(t.row.exceptionCode)))])])],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"订单号",prop:"orderIdDesc"}}),e._v(" "),r("el-table-column",{attrs:{label:"运单号",prop:"deliveryOrderIdDesc"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户手机号",prop:"userMobile"}}),e._v(" "),r("el-table-column",{attrs:{label:"商家手机号",prop:"shopMobile"}}),e._v(" "),r("el-table-column",{attrs:{width:"270",label:"商家名称",prop:"shopName"}}),e._v(" "),r("el-table-column",{attrs:{label:"商家城市",prop:"shopCityName"}}),e._v(" "),r("el-table-column",{attrs:{label:"订单类型",prop:"orderBookingType"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:1===t.row.orderBookingType?"":"success","close-transition":""}},[e._v(e._s(e._f("formatOrderBookingType")(t.row.orderBookingType))+"\n        ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"运单状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:e.getTagTypeByStatus(t.row.status),"close-transition":""}},[e._v(e._s(e._f("formatDeliveryOrderStatus")(t.row.status))+"\n        ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"商户ID",prop:"shopId"}}),e._v(" "),r("el-table-column",{attrs:{label:"配送员ID",prop:"postmanId"}}),e._v(" "),r("el-table-column",{attrs:{label:"配送员名称",prop:"postmanName"}}),e._v(" "),r("el-table-column",{attrs:{label:"运单生成时间",prop:"createTime",formatter:e.formatCreateTime}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(e){}}])})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.queryForm.pageIndex,"page-sizes":[20,50,100],"page-size":e.queryForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.rowCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},s=[],l={render:a,staticRenderFns:s};t.a=l},HmMD:function(e,t,r){"use strict";function a(e){r("n129")}Object.defineProperty(t,"__esModule",{value:!0});var s=r("UzN/"),l=r("FgR9"),o=r("VU/8"),n=a,i=o(s.a,l.a,n,null,null);t.default=i.exports},Ks6A:function(e,t,r){"use strict";function a(e){return r.i(s.a)({url:"/web_api/v1/delivery_order/list",method:"get",params:e})}t.a=a;var s=r("Vo7i")},"UzN/":function(e,t,r){"use strict";var a=r("Ks6A"),s=r("zL8q"),l=(r.n(s),r("E4LH")),o=r("Vnqz");t.a={filters:{formatExceptionCode:function(e){switch(e){case 0:return"无";case 1:return"无人抢单(第一次)";case 2:return"无人抢单(第二次)";case 3:return"取餐系统取消";case 4:return"骑手标记商户异常";case 5:return"配送系统取消";case 6:return"骑手标记用户异常"}},formatPaymentType:function(e){switch(e){case 0:return"微信";case 1:return"支付宝";default:return"其他"}},formatOrderBookingType:function(e){switch(e){case 0:return"即时单";case 1:return"预订单";default:return"未知类型"}},formatDeliveryOrderStatus:function(e){switch(e){case 0:return"分单中";case 1:return"取货中";case 2:return"配送中";case 3:return"配送完成";case 4:return"异常"}}},created:function(){this.queryDeliveryOrders()},data:function(){return{deliveryOrderStatusList:[{status:0,desc:"分单中"},{status:1,desc:"取货中"},{status:2,desc:"配送中"},{status:3,desc:"配送完成"},{status:4,desc:"异常"}],orderTypeList:[{type:0,desc:"即时单"},{type:1,desc:"预定单"}],listLoading:!1,rowCount:0,queryForm:{orderId:"",deliveryOrderId:"",status:"",type:"",dateRange:"",pageIndex:1,pageSize:20},queryFormRules:{orderId:[{validator:function(e,t,a){""===t||r.i(l.a)(t)?a():a(new Error("非法订单ID"))},trigger:"blur"}],deliveryOrderId:[{validator:function(e,t,a){""===t||r.i(l.a)(t)?a():a(new Error("非法运单ID"))},trigger:"blur"}]},deliveryOrdersTable:[]}},methods:{getTagTypeByStatus:function(e){switch(e){case 0:return"info";case 1:case 2:return"";case 3:return"success";case 4:return"danger"}},handleCurrentChange:function(e){this.queryForm.pageIndex=e,this.queryDeliveryOrders()},handleSizeChange:function(e){this.queryForm.pageSize=e,this.queryDeliveryOrders()},queryDeliveryOrders:function(){var e=this;this.listLoading=!0,r.i(a.a)(this.queryForm).then(function(t){var a=t.result;r.i(l.b)(a.records)?e.deliveryOrdersTable=[]:(e.deliveryOrdersTable=a.records,e.rowCount=a.total)}).catch(function(e){s.Message.error(e.errorMsg)}).finally(function(){e.listLoading=!1})},formatCreateTime:function(e,t,a){return r.i(o.a)(a,"yyyy-MM-dd hh:mm:ss")}}}},Vnqz:function(e,t,r){"use strict";function a(e,t){if(r.i(l.b)(e))return"";var a=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));var o={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds()};for(var n in o){var i=o[n]+"";new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i:s(i)))}return t}function s(e){return("00"+e).substr(e.length)}t.a=a;var l=r("E4LH")},n129:function(e,t,r){var a=r("okjs");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("7b169d30",a,!0)},okjs:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,".demo-table-expand{font-size:0}.demo-table-expand label{width:90px;color:#99a9bf}.demo-table-expand .el-form-item{margin-right:0;margin-bottom:0;width:50%}",""])}});