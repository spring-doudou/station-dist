webpackJsonp([30],{"/4w2":function(t,e,a){"use strict";function l(t){return a.i(i.a)({url:"/web_api/v1/finance/listStatement",method:"get",params:{date:t.date,page:t.page,size:t.size}})}function n(t){return a.i(i.a)({url:"/web_api/v1/finance/doClear",method:"post",params:{id:t.id,bankSerialNo:t.bankSerialNo}})}e.b=l,e.a=n;var i=a("Vo7i")},E4LH:function(t,e,a){"use strict";function l(t){return/^[0-9]*$/.test(t)}function n(t){return null===t||void 0===t||0===t.length}e.a=l,e.b=n},TE4p:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("djIC"),n=a("oPcJ"),i=a("VU/8"),o=i(l.a,n.a,null,null,null);e.default=o.exports},Vnqz:function(t,e,a){"use strict";function l(t,e){if(a.i(i.b)(t))return"";var l=new Date(t);/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(l.getFullYear()+"").substr(4-RegExp.$1.length)));var o={"M+":l.getMonth()+1,"d+":l.getDate(),"h+":l.getHours(),"m+":l.getMinutes(),"s+":l.getSeconds()};for(var r in o){var s=o[r]+"";new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?s:n(s)))}return e}function n(t){return("00"+t).substr(t.length)}e.a=l;var i=a("E4LH")},djIC:function(t,e,a){"use strict";var l=a("/4w2"),n=a("Vnqz");e.a={data:function(){return{bankSerialNo:"",currentRow:{},dateValue:a.i(n.a)(new Date((new Date).setTime(new Date)),"yyyy-MM-dd"),tableData:[],total:null,listLoading:!0,dialogVisible:!1,listQuery:{page:1,size:20,date:""}}},created:function(){this.list()},methods:{handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},confirmDoClear:function(){if(0===this.bankSerialNo.length)return void this.$message.error("银行流水号不能为空");var t={id:this.currentRow.id,bankSerialNo:this.bankSerialNo},e=this;a.i(l.a)(t).then(function(t){e.dialogVisible=!1,e.list()})},handleDoClear:function(t){this.currentRow=t,this.bankSerialNo="",this.dialogVisible=!0},changeDateRange:function(){this.list()},list:function(){var t=this;this.listLoading=!0,this.listQuery.date=this.dateValue,a.i(l.b)(this.listQuery).then(function(e){var a=e.result;t.tableData=a.records,t.total=a.total,t.listLoading=!1})},handleSizeChange:function(t){this.listQuery.size=t,this.list()},handleCurrentChange:function(t){this.listQuery.page=t,this.list()}}}},oPcJ:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("时间")]),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:t.changeDateRange},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{fixed:"",prop:"shopId",label:"商户id",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"shopName",label:"商户名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"platformCommission",label:"平台抽佣"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"shopIncome",label:"商户收入"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"statusDesc",label:"账单状态",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"clearDateDesc",label:"账单日期",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bagAmount",label:"包装袋费用"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalAmount",label:"商品总价"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deliveryAmount",label:"配送费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userPaymentAmount",label:"用户支付金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"shopAllowance",label:"商户补贴"}}),t._v(" "),a("el-table-column",{attrs:{prop:"platformAllowance",label:"平台补贴"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankSerialNo",label:"银行流水号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankName",label:"开户行",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankAccountName",label:"持卡人",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bankAccountNumber",label:"卡号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleDoClear(e.row)}}},[t._v("打款")]):t._e()]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("给"+t._s(t.currentRow.shopName)+"打款"+t._s(t.currentRow.shopIncome)+"元")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入银行流水号"},model:{value:t.bankSerialNo,callback:function(e){t.bankSerialNo=e},expression:"bankSerialNo"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmDoClear}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-size":t.listQuery.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.$set(t.listQuery,"page",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],i={render:l,staticRenderFns:n};e.a=i}});