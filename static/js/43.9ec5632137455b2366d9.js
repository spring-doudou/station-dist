webpackJsonp([43],{"2d62":function(e,i,t){"use strict";function l(){return t.i(c.a)({url:"/web_api/v1/rbac/roles/list",method:"get"})}function a(e){return t.i(c.a)({url:"/web_api/v1/rbac/roles/new",method:"post",data:{name:e}})}function o(e){return t.i(c.a)({url:"/web_api/v1/rbac/roles/selected",method:"get",params:e})}function n(e){return t.i(c.a)({url:"/web_api/v1/rbac/roles/delete",method:"delete",params:e})}function s(e,i){return t.i(c.a)({url:"/web_api/v1/rbac/roles/edit",method:"put",data:{id:e,name:i}})}function r(e){return t.i(c.a)({url:"/web_api/v1/rbac/privileges/list",method:"get",params:e})}function d(e){return t.i(c.a)({url:"/web_api/v1/rbac/privileges",method:"put",params:e})}i.a=l,i.c=a,i.g=o,i.f=n,i.b=s,i.d=r,i.e=d;var c=t("Vo7i")},Rwv1:function(e,i,t){"use strict";var l=t("2d62");i.a={data:function(){return{tableData:[],listLoading:!0,dialogFormVisible:!1,bindDialogFormVisible:!1,deleteDialogVisible:!1,editRole:{id:0,name:""},bindPrivileges:[],selectPrivileges:[]}},created:function(){this.queryRoles()},methods:{queryRoles:function(){var e=this;this.listLoading=!0,t.i(l.a)().then(function(i){var t=i.result;e.tableData=t,e.listLoading=!1})},handlerAdd:function(){this.isEdit=!1,this.dialogFormVisible=!0,this.editRole={id:0,name:""}},save:function(){var e=this;this.isEdit?t.i(l.b)(this.editRole.id,this.editRole.name).then(function(i){e.dialogFormVisible=!1,e.queryRoles()}):t.i(l.c)(this.editRole.name).then(function(i){e.dialogFormVisible=!1,e.queryRoles()})},handleEdit:function(e){this.editRole=this.tableData[e],this.isEdit=!0,this.dialogFormVisible=!0},handingBinding:function(e){var i=this;this.editRole=this.tableData[e];var a={roleId:this.editRole.id};this.selectPrivileges=[],this.bindPrivileges=[],t.i(l.d)(a).then(function(e){for(var t=0;t<e.result.length;t++){var l=e.result[t];i.bindPrivileges.push({key:l.id,label:l.name}),l.selected&&i.selectPrivileges.push(l.id)}i.bindDialogFormVisible=!0})},savePrivilege:function(){var e=this,i=[];this.selectPrivileges.forEach(function(e){i.push(e)});var a={roleId:this.editRole.id,privilegeIds:i.join()};t.i(l.e)(a).then(function(i){e.bindDialogFormVisible=!1,e.queryRoles()})},handleDelete:function(e){this.editRole=this.tableData[e],this.deleteDialogVisible=!0},deleteClickHandler:function(){var e=this,i={id:this.editRole.id};t.i(l.f)(i).then(function(i){e.deleteDialogVisible=!1,e.queryRoles()})}}}},tiUO:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=t("Rwv1"),a=t("wd4n"),o=t("VU/8"),n=o(l.a,a.a,null,null,null);i.default=n.exports},wd4n:function(e,i,t){"use strict";var l=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"app-container"},[t("div",[t("el-button",{attrs:{type:"primary"},on:{click:e.handlerAdd}},[e._v("添加角色")])],1),e._v(" "),t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"用户名",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{prop:"staffs",label:"员工"}}),e._v(" "),t("el-table-column",{attrs:{width:"300",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleEdit(i.$index)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){e.handleDelete(i.$index)}}},[e._v("删除")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(t){e.handingBinding(i.$index)}}},[e._v("修改权限")])]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"角色",visible:e.dialogFormVisible},on:{"update:visible":function(i){e.dialogFormVisible=i}}},[t("el-form",{attrs:{model:e.editRole}},[t("el-form-item",{attrs:{label:"名称"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editRole.name,callback:function(i){e.$set(e.editRole,"name",i)},expression:"editRole.name"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(i){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"权限",visible:e.bindDialogFormVisible},on:{"update:visible":function(i){e.bindDialogFormVisible=i}}},[t("div",[t("el-transfer",{attrs:{titles:["未选择","已选择"],data:e.bindPrivileges},model:{value:e.selectPrivileges,callback:function(i){e.selectPrivileges=i},expression:"selectPrivileges"}})],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(i){e.bindDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.savePrivilege}},[e._v("保 存")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%"},on:{"update:visible":function(i){e.deleteDialogVisible=i}}},[t("span",[e._v("确认删除此角色嘛？")]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(i){e.deleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.deleteClickHandler}},[e._v("确 定")])],1)])],1)},a=[],o={render:l,staticRenderFns:a};i.a=o}});